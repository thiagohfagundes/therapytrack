<!-- Modal nativo (pode ser incluído em qualquer página). 
     Adicione data-autoshow para abrir automaticamente. -->
<dialog id="eventoModal" style="max-width:720px;width:96%;border:none;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);">
  <form method="post" action="{% url 'terapias:criar-evento' %}" style="margin:0;">
    {% csrf_token %}
    <div style="padding:16px 20px;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center;">
      <input name="nome" value="{{ form.nome.value|default_if_none:'' }}" placeholder="Adicionar título"
             style="flex:1;border:none;font-size:18px;outline:none;">
      <button type="button" onclick="fecharModal()" aria-label="Fechar" style="margin-left:8px;">✕</button>
    </div>

    <div style="padding:16px 20px;display:grid;gap:12px;">
      <!-- Linha: data, início, término -->
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;">
        <div>
          <label for="id_data" style="display:block;font-size:.9rem;">Data</label>
          {{ form.data_evento }}
          {{ form.data_evento.errors }}
        </div>
        <div>
          <label for="id_hora_inicio" style="display:block;font-size:.9rem;">Início</label>
          {{ form.hora_inicio }}
          {{ form.hora_inicio.errors }}
        </div>
        <div>
          <label for="id_hora_fim" style="display:block;font-size:.9rem;">Término</label>
          {{ form.hora_fim }}
          {{ form.hora_fim.errors }}
        </div>
      </div>

      <!-- Linha: criança (obrigatória) -->
      <div>
        <label for="id_crianca" style="display:block;font-size:.9rem;">Criança</label>
        {{ form.crianca }}
        {{ form.crianca.errors }}
      </div>

      <!-- Linha: profissional, clínica (opcionais) -->
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
        <div>
          <label for="id_profissional" style="display:block;font-size:.9rem;">Profissional (opcional)</label>
          {{ form.profissional }}
          {{ form.profissional.errors }}
        </div>
        <div>
          <label for="id_clinica" style="display:block;font-size:.9rem;">Clínica (opcional)</label>
          {{ form.clinica }}
          {{ form.clinica.errors }}
        </div>
      </div>

      <!-- Tipo e notas (como "Mais opções" do Google, mas já disponível) -->
      <div style="display:grid;grid-template-columns:1fr;gap:12px;">
        <div>
          <label for="id_tipo" style="display:block;font-size:.9rem;">Tipo</label>
          {{ form.tipo }}
          {{ form.tipo.errors }}
        </div>
        <div>
          <label for="id_notas" style="display:block;font-size:.9rem;">Notas</label>
          {{ form.notas }}
          {{ form.notas.errors }}
        </div>
      </div>

      {{ form.non_field_errors }}
    </div>

    <div style="padding:12px 20px;border-top:1px solid #e5e7eb;display:flex;justify-content:flex-end;gap:8px;">
      <button type="button" onclick="fecharModal()">Cancelar</button>
      <button type="submit">Salvar</button>
    </div>
  </form>
</dialog>

<!-- Fallback simples caso alguém acesse a URL diretamente (sem <dialog> suportado) -->
<noscript>
  <h2>Novo evento</h2>
  <form method="post" action="{% url 'terapias:criar-evento' %}">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Salvar</button>
  </form>
</noscript>