{% extends "base.html" %}
{% block title %}Clínicas{% endblock %}

{% block content %}
<section style="max-width:900px;margin:0 auto;padding:1rem;">
  <header style="display:flex;gap:1rem;align-items:center;justify-content:space-between;">
    <h2 style="margin:0;">Clínicas</h2>
    <a href="{% url 'terapias:criar-clinica' %}">+ Nova clínica</a>
  </header>

  <form method="get" style="margin:1rem 0;">
    <input type="search" name="q" value="{{ request.GET.q }}" placeholder="buscar por nome, endereço ou telefone" style="width:100%;max-width:520px;">
  </form>

  {% if clinicas %}
    <ul style="list-style:none;padding:0;margin:0;display:grid;gap:0.5rem;">
      {% for c in clinicas %}
        <li style="border:1px solid #e5e7eb;border-radius:8px;padding:0.75rem;">
            <a href="{% url 'terapias:detalhes-clinica' c.pk %}">
                <strong>{{ c.nome }}</strong>
            </a>
            <a href="{% url 'terapias:editar-clinica' c.pk %}" style="font-size:.85rem;">Editar</a>
            <a href="{% url 'terapias:deletar-clinica' c.pk %}" style="font-size:.85rem;">Excluir</a>
        </div>
        {% if c.endereco %}
            <div style="font-size:.9rem;color:#555;">{{ c.endereco }}</div>
        {% endif %}
        <div style="font-size:.85rem;color:#666;margin-top:.25rem;">
            {{ c.telefone|default:"—" }} • {{ c.n_profissionais }} prof. • {{ c.n_eventos }} eventos
        </div>
        </li>
      {% endfor %}
    </ul>

    {% if is_paginated %}
      <nav style="margin-top:1rem;display:flex;gap:.5rem;align-items:center;">
        {% if page_obj.has_previous %}
          <a href="?q={{ request.GET.q }}&page={{ page_obj.previous_page_number }}">‹ anterior</a>
        {% endif %}
        <span>Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
          <a href="?q={{ request.GET.q }}&page={{ page_obj.next_page_number }}">próxima ›</a>
        {% endif %}
      </nav>
    {% endif %}
  {% else %}
    <p>Nenhuma clínica encontrada.</p>
  {% endif %}
</section>
{% endblock %}
