{% extends "base.html" %}
{% block title %}Profissionais{% endblock %}

{% block content %}
<section style="max-width:900px;margin:0 auto;padding:1rem;">
  <header style="display:flex;gap:1rem;align-items:center;justify-content:space-between;">
    <h2 style="margin:0;">Profissionais</h2>
    <a href="{% url 'terapias:criar-profissional' %}">+ Novo profissional</a>
  </header>

  <form method="get" style="margin:1rem 0;">
    <input type="search" name="q" value="{{ request.GET.q }}" placeholder="buscar por nome, especialidade, e-mail ou telefone" style="width:100%;max-width:520px;">
  </form>

  {% if profissionais %}
    <ul style="list-style:none;padding:0;margin:0;display:grid;gap:0.5rem;">
      {% for p in profissionais %}
        <li style="border:1px solid #e5e7eb;border-radius:8px;padding:0.75rem;">
          <a href="{% url 'terapias:detalhes-profissional' p.pk %}">
            <strong>{{ p.nome }}</strong>
          </a>
          <a href="{% url 'terapias:editar-profissional' p.pk %}" style="font-size:.85rem;">Editar</a>
          <a href="{% url 'terapias:deletar-profissional' p.pk %}" style="font-size:.85rem;">Excluir</a>
          <div style="font-size:.9rem;color:#555;">
            {{ p.get_tipo_display }}{% if p.especialidade %} • {{ p.especialidade }}{% endif %}
            {% if p.clinica %} • {{ p.clinica.nome }}{% endif %}
          </div>
        </li>
      {% endfor %}
    </ul>

    {# paginação #}
    {% if is_paginated %}
      <nav style="margin-top:1rem;display:flex;gap:.5rem;align-items:center;">
        {% if page_obj.has_previous %}
          <a href="?q={{ request.GET.q }}&page={{ page_obj.previous_page_number }}">‹ anterior</a>
        {% endif %}
        <span>Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
          <a href="?q={{ request.GET.q }}&page={{ page_obj.next_page_number }}">próxima ›</a>
        {% endif %}
      </nav>
    {% endif %}
  {% else %}
    <p>Nenhum profissional encontrado.</p>
  {% endif %}
</section>
{% endblock %}
